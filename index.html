<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinite Click Speed Test</title>
    <style>
        :root {
            --bg: #0f172a;
            --surface: #1e293b;
            --primary: #6366f1; /* Indigo */
            --accent: #06b6d4; /* Cyan */
            --text: #f8fafc;
            --glow: 0 0 20px rgba(99, 102, 241, 0.5);
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            user-select: none;
        }

        /* --- HEADER & TOGGLES --- */
        .header {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            background: var(--surface);
            padding: 8px;
            border-radius: 50px;
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
        }

        .mode-btn {
            background: transparent;
            color: #94a3b8;
            border: none;
            padding: 10px 25px;
            border-radius: 40px;
            cursor: pointer;
            font-weight: 700;
            font-size: 14px;
            transition: 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .mode-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: var(--glow);
        }

        /* --- MAIN ARENA --- */
        .arena {
            display: flex;
            gap: 25px;
            align-items: stretch;
            height: 400px;
        }

        /* --- CLICK ZONE --- */
        .click-zone {
            width: 400px;
            background: var(--surface);
            border: 2px solid #334155;
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: crosshair;
            transition: all 0.1s;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 60px rgba(0,0,0,0.5);
        }

        .click-zone:active {
            transform: scale(0.98);
            border-color: var(--accent);
            box-shadow: inset 0 0 30px rgba(6, 182, 212, 0.2);
        }

        .click-zone h2 {
            font-size: 100px;
            margin: 0;
            z-index: 2;
            font-variant-numeric: tabular-nums;
            text-shadow: 0 0 30px rgba(255,255,255,0.1);
        }

        .click-zone p {
            color: #94a3b8;
            font-size: 16px;
            z-index: 2;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: -10px;
        }

        /* Ripple Effect */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            transform: scale(0);
            animation: ripple-anim 0.4s linear;
            pointer-events: none;
        }
        @keyframes ripple-anim { to { transform: scale(3); opacity: 0; } }

        /* --- SPEEDOMETER BAR --- */
        .speedometer {
            width: 90px;
            background: var(--surface);
            border-radius: 24px;
            position: relative;
            display: flex;
            flex-direction: column-reverse;
            overflow: hidden;
            border: 2px solid #334155;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        .fill-bar {
            width: 100%;
            height: 0%;
            background: linear-gradient(to top, #3b82f6, #8b5cf6, #d946ef);
            transition: height 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0.9;
            box-shadow: 0 0 30px rgba(217, 70, 239, 0.6);
        }

        .animal-marker {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            text-align: center;
            border-bottom: 1px dashed rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.5);
            font-size: 11px;
            padding-bottom: 4px;
            font-weight: bold;
            pointer-events: none;
        }
        
        .m-snail { bottom: 10%; }   /* 1-2 CPS */
        .m-turtle { bottom: 30%; }  /* 4-5 CPS */
        .m-rabbit { bottom: 50%; }  /* 7-8 CPS */
        .m-cheetah { bottom: 75%; } /* 11-12 CPS */
        .m-falcon { bottom: 90%; }  /* 14+ CPS */

        /* --- STATS ONLY (No Button) --- */
        .footer {
            margin-top: 30px;
            display: flex;
            justify-content: center;
        }

        .stats-row {
            display: flex;
            gap: 50px;
            text-align: center;
            background: rgba(255,255,255,0.03);
            padding: 15px 40px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .stat-box h3 { margin: 0; font-size: 12px; color: #94a3b8; text-transform: uppercase; letter-spacing: 1px; }
        .stat-box div { font-size: 20px; font-weight: 800; margin-top: 5px; color: white; }
        .highlight { color: var(--accent) !important; text-shadow: 0 0 10px rgba(6, 182, 212, 0.6); }

    </style>
</head>
<body>

    <div class="header">
        <button class="mode-btn active" id="btnLeft" onclick="setMode('left')">Left Click</button>
        <button class="mode-btn" id="btnRight" onclick="setMode('right')">Right Click</button>
    </div>

    <div class="arena">
        <div class="click-zone" id="clickArea" onmousedown="handleClick(event)" oncontextmenu="return false;">
            <h2 id="cpsDisplay">0</h2>
            <p>Clicks / Sec</p>
        </div>

        <div class="speedometer">
            <div class="fill-bar" id="speedBar"></div>
            
            <div class="animal-marker m-falcon">ü¶Ö FALCON</div>
            <div class="animal-marker m-cheetah">üêÜ CHEETAH</div>
            <div class="animal-marker m-rabbit">üêá RABBIT</div>
            <div class="animal-marker m-turtle">üê¢ TURTLE</div>
            <div class="animal-marker m-snail">üêå SNAIL</div>
        </div>
    </div>

    <div class="footer">
        <div class="stats-row">
            <div class="stat-box">
                <h3>Session Best</h3>
                <div id="pbDisplay">0 CPS</div>
            </div>
            <div class="stat-box">
                <h3>World Record</h3>
                <div class="highlight">14.2 CPS</div>
            </div>
        </div>
    </div>

<script>
    // GAME STATE
    let mode = 'left'; 
    let clickTimestamps = []; // Stores the time of every click in the last 1 second
    let maxCPS = 0;

    // DOM ELEMENTS
    const cpsDisplay = document.getElementById('cpsDisplay');
    const pbDisplay = document.getElementById('pbDisplay');
    const speedBar = document.getElementById('speedBar');
    const clickArea = document.getElementById('clickArea');

    // START LOOP
    requestAnimationFrame(gameLoop);

    function setMode(newMode) {
        mode = newMode;
        document.getElementById('btnLeft').classList.toggle('active', mode === 'left');
        document.getElementById('btnRight').classList.toggle('active', mode === 'right');
        resetGame(); // Auto-reset when changing modes
    }

    function handleClick(e) {
        if (e.button === 2) e.preventDefault(); // Block Context Menu

        const requiredButton = (mode === 'left') ? 0 : 2;
        if (e.button !== requiredButton) return;

        createRipple(e);

        // Add current time to array
        const now = Date.now();
        clickTimestamps.push(now);
    }

    function gameLoop() {
        const now = Date.now();

        // Remove clicks older than 1 second (1000ms)
        // This creates a "Moving Window" of 1 second
        while (clickTimestamps.length > 0 && clickTimestamps[0] <= now - 1000) {
            clickTimestamps.shift();
        }

        const currentCPS = clickTimestamps.length;

        // Update Display
        cpsDisplay.innerText = currentCPS;

        // Update High Score
        if (currentCPS > maxCPS) {
            maxCPS = currentCPS;
            pbDisplay.innerText = maxCPS + " CPS";
            pbDisplay.classList.add('highlight');
        }

        // Update Bar Height (Max scale 15 CPS)
        let percentage = (currentCPS / 15) * 100;
        if (percentage > 100) percentage = 100;
        speedBar.style.height = `${percentage}%`;

        // Loop forever
        requestAnimationFrame(gameLoop);
    }

    function resetGame() {
        clickTimestamps = [];
        maxCPS = 0;
        cpsDisplay.innerText = "0";
        pbDisplay.innerText = "0 CPS";
        speedBar.style.height = "0%";
        pbDisplay.classList.remove('highlight');
    }

    // Ripple Visual Effect
    function createRipple(event) {
        const circle = document.createElement("span");
        const diameter = Math.max(clickArea.clientWidth, clickArea.clientHeight);
        const radius = diameter / 2;
        const rect = clickArea.getBoundingClientRect();

        circle.style.width = circle.style.height = `${diameter}px`;
        circle.style.left = `${event.clientX - rect.left - radius}px`;
        circle.style.top = `${event.clientY - rect.top - radius}px`;
        circle.classList.add("ripple");

        const ripple = clickArea.getElementsByClassName("ripple")[0];
        if (ripple) {
            ripple.remove();
        }

        clickArea.appendChild(circle);
    }
</script>

</body>
</html>